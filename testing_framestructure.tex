% Preview source code

%% LyX 2.1.4 created this file.  For more info, see http://www.lyx.org/.
%% Do not edit unless you really know what you are doing.
\documentclass[12pt,english]{article}
\renewcommand{\familydefault}{\sfdefault}
\usepackage[T1]{fontenc}
\usepackage[latin9]{inputenc}
\usepackage[a4paper]{geometry}
\geometry{verbose,tmargin=25mm,bmargin=25mm,lmargin=25mm,rmargin=25mm}
\usepackage{fancyhdr}
\pagestyle{fancy}
\usepackage{color}
\usepackage{amstext}
\PassOptionsToPackage{normalem}{ulem}
\usepackage{ulem}

\makeatletter
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% User specified LaTeX commands.
\usepackage{titling, graphicx}
\usepackage{tikz}
%\usepackage{strtikz}

\usetikzlibrary{shapes,arrows.meta, intersections, graphs, graphs.standard}
\usetikzlibrary{math}

\date{}
%\setlength\parindent{0pt}

\pretitle{\begin{center} \Large \bf \vspace{-2em}}
\posttitle{\par\end{center}\vspace{-1.5em}}
\preauthor{\begin{center} \large \lineskip 1em \begin{tabular}[t]{c}}
\postauthor{\end{tabular}\par\end{center}\vspace{-5em}}

\rhead{Test}
\lhead{\thetitle}

\fancypagestyle{firststyle}
{
\lhead{None}
\chead{\includegraphics[width=0.75cm, keepaspectratio=true]{logo.pdf}}
\rhead{None}
}

\makeatother

\usepackage{babel}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Newcommand: framestructure

\newcommand{\framestructure}[8]
{
\tikzmath{
int \ns, \nb, \ncol, \nlev, \nlevmo, \ncolmo, \i, \j;
real \sh, \bw, \startx, \starty, \xx, \y;
real \supw, \suph;
coordinate \c;
\ns = {#1}; %number of storys
\nb = {#2}; %number of bays
\ncol = \nb+1; %number of columns
\nlev = \ns+1; %number of levels
if \ns>1 then {\nlevmo = \nlev-1;} else {\nlevmo=2;};
if \nb>1 then {\ncolmo = \ncol-1;} else {\ncolmo=2;};
\sh = {#3}; %story height
\bw = {#4}; % bay width
\starty = {#5}; %starting coordinate y
\startx = {#6}; %starting coordinate x
\supw = {#7}; %support width
\suph = {#8}; %support height
for \i in {1,...,{\nlev}}{
\y{\i} = \starty + (\i-1)*\sh;
for \j in {1,...,{\ncol}}{
\x{\j} = \startx + (\j-1)*\bw;
};
};
print{\nlevmo};
}

%\draw [line width=0pt, color = white] (0, \y{\nlev}+2);
\draw [line width = 1pt] (\x{1},\y{1}) -- (\x{1}, \y{\nlev}) -- (\x{\ncol}, \y{\nlev}) -- (\x{\ncol}, \y{1});
\foreach \i in {2,...,{\nlevmo}} {\draw [line width = 1pt] (\x{1},\y{\i}) -- (\x{\ncol},\y{\i}); };
\foreach \j in {2,...,{\ncolmo}} {\draw [line width = 1pt] (\x{\j},\y{1}) -- (\x{\j},\y{\nlev}); };
\draw [{->}] (\x{\ncol}+\supw,\y{1}) -- +(1,0) node[anchor=west]{$X$};
\draw [{->}] (\x{1},\y{\nlev}+0.5) -- +(0,1) node[anchor=east]{$Y$};
\foreach \j in {1,...,{\ncol}}
{
\filldraw [gray] (\x{\j},\y{1}) +({-\supw/2},-\suph) rectangle +({\supw/2},\y{1});
\draw [line width = 2pt] (\x{\j},\y{1}) +({-\supw/2},\y{1}) -- +({\supw/2},\y{1});
}

}
% end framestructure
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\begin{document}

\title{Testing}


\author{Test Test}

\maketitle
\thispagestyle{firststyle}


\section{Testing}


\begin{center}
\begin{tikzpicture}
\framestructure{1}{1}{3}{4}{0}{0}{0.7}{0.3}
\end{tikzpicture}
\end{center}

\end{document}


