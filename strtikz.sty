\ProvidesPackage{strtikz}[2016/03/05 v1.0 Structural-Tikz Macros]


\newcommand{\dframe}[8]
{
\begin{tikzpicture} [scale=1]

\tikzmath{
int \ns, \nb, \ncol, \nlev, \i, \j;
real \sh, \bw, \startx, \starty, \xx, \y;
real \supw, \suph;
coordinate \c;
\ns = {#1}; %number of storys
\nb = {#2}; %number of bays
\ncol = \nb+1; %number of columns
\nlev = \ns+1; %number of levels
\sh = {#3}; %story height
\bw = {#4}; % bay width
\starty = {#5}; %starting coordinate y
\startx = {#6}; %starting coordinate x
\supw = {#7}; %support width
\suph = {#8}; %support height
for \i in {1,...,{\nlev}}{
\y{\i} = \starty + (\i-1)*\sh;
for \j in {1,...,{\ncol}}{
\x{\j} = \startx + (\j-1)*\bw;
};
};
}

\draw [line width=0pt, color = white] (0, \y{\nlev}+2);
\foreach \i in {2,...,{\nlev}}
{
\draw [line width = 1pt] (\x{1},\y{\i}) -- (\x{\ncol},\y{\i});
}
\foreach \j in {1,...,{\ncol}}
{
\draw [line width = 1pt] (\x{\j},\y{1}) -- (\x{\j},\y{\nlev});
}
\draw [{->}] (\x{\ncol}+\supw,\y{1}) -- +(1,0) node[anchor=west]{$X$};
\draw [{->}] (\x{1},\y{\nlev}+0.5) -- +(0,1) node[anchor=east]{$Y$};
\foreach \j in {1,...,{\ncol}}
{
\filldraw [gray] (\x{\j},\y{1}) +({-\supw/2},-\suph) rectangle +({\supw/2},\y{1});
\draw [line width = 2pt] (\x{\j},\y{1}) +({-\supw/2},\y{1}) -- +({\supw/2},\y{1});
}

\end{tikzpicture}

}  % end \newcommand
